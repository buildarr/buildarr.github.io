<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Usage - Buildarr</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
        <link href="../assets/_mkdocstrings.css" rel="stylesheet">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">Buildarr</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../release-notes/" class="nav-link">Release Notes</a>
                            </li>
                            <li class="navitem">
                                <a href="../installation/" class="nav-link">Installation</a>
                            </li>
                            <li class="navitem">
                                <a href="../configuration/" class="nav-link">Configuration</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Plugins <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../plugins/" class="dropdown-item">Introduction</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Buildarr Sonarr Plugin</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../plugins/sonarr/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../plugins/sonarr/release-notes/" class="dropdown-item">Release Notes</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Configuration</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../plugins/sonarr/configuration/host/" class="dropdown-item">Host Configuration</a>
</li>
            
<li>
    <a href="../plugins/sonarr/configuration/media-management/" class="dropdown-item">Media Management</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Profiles</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../plugins/sonarr/configuration/profiles/quality/" class="dropdown-item">Quality Profiles</a>
</li>
            
<li>
    <a href="../plugins/sonarr/configuration/profiles/language/" class="dropdown-item">Language Profiles</a>
</li>
            
<li>
    <a href="../plugins/sonarr/configuration/profiles/delay/" class="dropdown-item">Delay Profiles</a>
</li>
            
<li>
    <a href="../plugins/sonarr/configuration/profiles/release/" class="dropdown-item">Release Profiles</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../plugins/sonarr/configuration/quality/" class="dropdown-item">Quality</a>
</li>
            
<li>
    <a href="../plugins/sonarr/configuration/indexers/" class="dropdown-item">Indexers</a>
</li>
            
<li>
    <a href="../plugins/sonarr/configuration/download-clients/" class="dropdown-item">Download Clients</a>
</li>
            
<li>
    <a href="../plugins/sonarr/configuration/import-lists/" class="dropdown-item">Import Lists</a>
</li>
            
<li>
    <a href="../plugins/sonarr/configuration/connect/" class="dropdown-item">Connect</a>
</li>
            
<li>
    <a href="../plugins/sonarr/configuration/metadata/" class="dropdown-item">Metadata</a>
</li>
            
<li>
    <a href="../plugins/sonarr/configuration/tags/" class="dropdown-item">Tags</a>
</li>
            
<li>
    <a href="../plugins/sonarr/configuration/general/" class="dropdown-item">General</a>
</li>
            
<li>
    <a href="../plugins/sonarr/configuration/ui/" class="dropdown-item">UI</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">Usage</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../plugins/sonarr/configuration/ui/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#using-buildarr" class="nav-link">Using Buildarr</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#manual-runs" class="nav-link">Manual runs</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#as-a-service-daemon-mode" class="nav-link">As a service (daemon mode)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#testing-configuration" class="nav-link">Testing configuration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#generating-a-docker-compose-file" class="nav-link">Generating a Docker Compose file</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#plugin-specific-commands" class="nav-link">Plugin-specific commands</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="using-buildarr">Using Buildarr<a class="headerlink" href="#using-buildarr" title="Permanent link">#</a></h1>
<p>Apart from the configuration, most of the interactions with Buildarr are done via the command line.</p>
<p>The following commands are available for Buildarr:</p>
<ul>
<li><code>buildarr run</code> - Manually perform an update run on one or more instances and exit</li>
<li><code>buildarr daemon</code> - Run Buildarr forever: perform an initial update run, and then
  schedule periodic updates</li>
<li><code>buildarr test-config</code> - Test a configuration file for correctness (<em>New in version 0.4.0</em>)</li>
<li><code>buildarr compose</code> - Generate a Docker Compose file from Buildarr configuration (<em>New in version 0.4.0</em>)</li>
<li><code>buildarr &lt;plugin-name&gt; &lt;command...&gt;</code> - Ad-hoc commands defined by any loaded plugins</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Every time Buildarr performs an update run, a file named <code>secrets.json</code> is created in the folder the configuration file is located. This file caches secrets metadata for every configured instance.</p>
<p>Ensure that the Buildarr configuration is located in a folder that is not world-viewable, to avoid exposing secrets.</p>
<p>If you are using Docker, ensure that the folder mounted as <code>/config</code> into the container has appropriately secure permissions.</p>
<p>The location of <code>secrets.json</code> can be configured using the <code>--secrets-file</code> command line option, or the <a href="../configuration/#buildarr.config.buildarr.BuildarrConfig.secrets_file_path"><code>buildarr.secrets_file_path</code> attribute</a> in the configuration file.</p>
</div>
<p>The verbosity of Buildarr logging output can be adjusted using the <code>--log-level</code> option.
This option can also be set using the <code>$BUILDARR_LOG_LEVEL</code> environment variable.</p>
<p>For more interactive documentation, you can pass <code>--help</code> to any individual command.</p>
<div class="highlight"><pre><span></span><code>$ buildarr --help
Usage: buildarr [OPTIONS] COMMAND [ARGS]...

  Construct and configure Arr PVR stacks.

  Can be run as a daemon or as an ad-hoc command.

  Supports external plugins to allow for adding support for multiple types of
  instances.

Options:
  -l, --log-level [ERROR|WARNING|INFO|DEBUG]
                                  Buildarr logging system log level. Can also
                                  be set using the `$BUILDARR_LOG_LEVEL&#39;
                                  environment variable.  [default: INFO]
  --help                          Show this message and exit.

Commands:
  daemon       Run as a daemon and periodically update defined instances.
  run          Update configured instances, and exit.
  sonarr       Sonarr instance ad-hoc commands.
  test-config  Test a Buildarr configuration file for correctness.
</code></pre></div>
<h2 id="manual-runs">Manual runs<a class="headerlink" href="#manual-runs" title="Permanent link">#</a></h2>
<p>Buildarr is capable of executing individual update runs, optionally passing
an arbitrary configuration file to parse.
This is useful to test configuration files before formally deploying Buildarr.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>buildarr<span class="w"> </span>run<span class="w"> </span><span class="o">[</span>/path/to/config.yml<span class="o">]</span>
</code></pre></div>
<p>If using Docker, the command would look something like this:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-v<span class="w"> </span>/path/to/config:/config<span class="w"> </span>-e<span class="w"> </span><span class="nv">PUID</span><span class="o">=</span>&lt;PUID&gt;<span class="w"> </span>-e<span class="w"> </span><span class="nv">PGID</span><span class="o">=</span>&lt;PGID&gt;<span class="w"> </span>callum027/buildarr:latest<span class="w"> </span>run<span class="w"> </span><span class="o">[</span>/config/buildarr.yml<span class="o">]</span>
</code></pre></div>
<p>Executing <code>buildarr run</code> will result in something resembling the following output.</p>
<div class="highlight"><pre><span></span><code>$ buildarr run
2023-03-29 20:39:50,856 buildarr:1 buildarr.cli.run [INFO] Buildarr version 0.4.0 (log level: INFO)
2023-03-29 20:39:50,856 buildarr:1 buildarr.cli.run [INFO] Loading configuration file &#39;/config/buildarr.yml&#39;
2023-03-29 20:39:50,872 buildarr:1 buildarr.cli.run [INFO] Finished loading configuration file
2023-03-29 20:39:50,874 buildarr:1 buildarr.cli.run [INFO] Loaded plugins: sonarr (0.4.0)
2023-03-29 20:39:50,875 buildarr:1 buildarr.cli.run [INFO] Loading instance configurations
2023-03-29 20:39:50,877 buildarr:1 buildarr.cli.run [INFO] Finished loading instance configurations
2023-03-29 20:39:50,877 buildarr:1 buildarr.cli.run [INFO] Running with plugins: sonarr
2023-03-29 20:39:50,877 buildarr:1 buildarr.cli.run [INFO] Resolving instance dependencies
2023-03-29 20:39:50,877 buildarr:1 buildarr.cli.run [INFO] Finished resolving instance dependencies
2023-03-29 20:39:50,877 buildarr:1 buildarr.cli.run [INFO] Loading secrets file from &#39;/config/secrets.json&#39;
2023-03-29 20:39:50,886 buildarr:1 buildarr.cli.run [INFO] Finished loading secrets file
2023-03-29 20:39:50,886 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Checking secrets
2023-03-29 20:39:50,912 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Connection test successful using cached secrets
2023-03-29 20:39:50,912 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Finished checking secrets
2023-03-29 20:39:50,912 buildarr:1 buildarr.cli.run [INFO] Saving updated secrets file to &#39;/config/secrets.json&#39;
2023-03-29 20:39:50,914 buildarr:1 buildarr.cli.run [INFO] Finished saving updated secrets file
2023-03-29 20:39:50,914 buildarr:1 buildarr.cli.run [INFO] Updating configuration on remote instances
2023-03-29 20:39:50,914 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Getting remote configuration
2023-03-29 20:39:51,406 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Finished getting remote configuration
2023-03-29 20:39:51,463 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Updating remote configuration
2023-03-29 20:39:51,927 buildarr:1 buildarr.config.base [INFO] &lt;sonarr&gt; (default) sonarr.settings.general.host.instance_name: &#39;Sonarr&#39; -&gt; &#39;Sonarr (Buildarr Example)&#39;
2023-03-29 20:39:52,019 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Remote configuration successfully updated
2023-03-29 20:39:52,019 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Finished updating remote configuration
2023-03-29 20:39:52,019 buildarr:1 buildarr.cli.run [INFO] Finished updating configuration on remote instances
</code></pre></div>
<p>Of note in particular is the following line:</p>
<div class="highlight"><pre><span></span><code>2023-03-29 20:39:51,927 buildarr:1 buildarr.config.base [INFO] &lt;sonarr&gt; (default) sonarr.settings.general.host.instance_name: &#39;Sonarr&#39; -&gt; &#39;Sonarr (Buildarr Example)&#39;
</code></pre></div>
<p>When Buildarr detects that the remote configuration differs from the locally defined configuration, the remote configuration will be updated. In this case, Buildarr detected that on the <code>default</code> instance configured in the Sonarr plugin, the configured GUI instance name is different from the locally defined value, so it updated the Sonarr instance to reflect the change.</p>
<p>If the run fails for one reason or another, an error message will be logged and Buildarr will exit with a non-zero status code.</p>
<h3 id="dry-runs">Dry runs<a class="headerlink" href="#dry-runs" title="Permanent link">#</a></h3>
<p><em>New in version 0.4.0.</em></p>
<p>Buildarr ad-hoc runs support a dry-run mode, so you can check what <em>would</em> change on configured instances, before actually applying them. Under this mode, the output of Buildarr itself is almost exactly the same, but any actions logged in the output are not actually performed.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>buildarr<span class="w"> </span>run<span class="w"> </span>--dry-run
</code></pre></div>
<p>This allows you to test changes in the configuration, or check the current state of remote instances against the configuration before actually committing changes.</p>
<h2 id="as-a-service-daemon-mode">As a service (daemon mode)<a class="headerlink" href="#as-a-service-daemon-mode" title="Permanent link">#</a></h2>
<p>This is the mode in which that Buildarr is intended to run in most cases.</p>
<p>Buildarr will run as a daemon in the foreground. First, an initial update run is performed, similar to <code>buildarr run</code>. If the initial run is successful, Buildarr will then schedule updates to run at specific times according to the configuration,
logging when the next scheduled run will occur.</p>
<p>This is intended to be used to keep a *Arr stack continually up to date, particularly if it has TRaSH-Guides metadata configured. Every scheduled run, the TRaSH-Guides metadata is updated, ensuring that any instances using it will always be using the most up to date profiles.</p>
<p>There are several options for changing how Buildarr daemon runs in the <a href="../configuration/#buildarr-settings">Buildarr configuration</a>.</p>
<div class="highlight"><pre><span></span><code>2023-03-29 20:40:39,958 buildarr:1 buildarr.cli.daemon [INFO] Buildarr version 0.4.0 (log level: INFO)
2023-03-29 20:40:39,958 buildarr:1 buildarr.cli.daemon [INFO] Loading configuration file &#39;/config/buildarr.yml&#39;
2023-03-29 20:40:39,977 buildarr:1 buildarr.cli.daemon [INFO] Finished loading configuration file
2023-03-29 20:40:39,977 buildarr:1 buildarr.cli.daemon [INFO] Daemon configuration:
2023-03-29 20:40:39,978 buildarr:1 buildarr.cli.daemon [INFO]  - Watch configuration files: Yes
2023-03-29 20:40:39,978 buildarr:1 buildarr.cli.daemon [INFO]  - Configuration files to watch:
2023-03-29 20:40:39,978 buildarr:1 buildarr.cli.daemon [INFO]    - /config/buildarr.yml
2023-03-29 20:40:39,978 buildarr:1 buildarr.cli.daemon [INFO]  - Update at:
2023-03-29 20:40:39,978 buildarr:1 buildarr.cli.daemon [INFO]    - Monday 03:00
2023-03-29 20:40:39,979 buildarr:1 buildarr.cli.daemon [INFO]    - Tuesday 03:00
2023-03-29 20:40:39,979 buildarr:1 buildarr.cli.daemon [INFO]    - Wednesday 03:00
2023-03-29 20:40:39,979 buildarr:1 buildarr.cli.daemon [INFO]    - Thursday 03:00
2023-03-29 20:40:39,979 buildarr:1 buildarr.cli.daemon [INFO]    - Friday 03:00
2023-03-29 20:40:39,979 buildarr:1 buildarr.cli.daemon [INFO]    - Saturday 03:00
2023-03-29 20:40:39,979 buildarr:1 buildarr.cli.daemon [INFO]    - Sunday 03:00
2023-03-29 20:40:39,979 buildarr:1 buildarr.cli.daemon [INFO] Applying initial configuration
2023-03-29 20:40:39,981 buildarr:1 buildarr.cli.run [INFO] Loaded plugins: sonarr (0.4.0)
2023-03-29 20:40:39,981 buildarr:1 buildarr.cli.run [INFO] Loading instance configurations
2023-03-29 20:40:39,983 buildarr:1 buildarr.cli.run [INFO] Finished loading instance configurations
2023-03-29 20:40:39,983 buildarr:1 buildarr.cli.run [INFO] Running with plugins: sonarr
2023-03-29 20:40:39,983 buildarr:1 buildarr.cli.run [INFO] Resolving instance dependencies
2023-03-29 20:40:39,984 buildarr:1 buildarr.cli.run [INFO] Finished resolving instance dependencies
2023-03-29 20:40:39,984 buildarr:1 buildarr.cli.run [INFO] Loading secrets file from &#39;/config/secrets.json&#39;
2023-03-29 20:40:39,989 buildarr:1 buildarr.cli.run [INFO] Finished loading secrets file
2023-03-29 20:40:39,989 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Checking secrets
2023-03-29 20:40:40,015 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Connection test successful using cached secrets
2023-03-29 20:40:40,015 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Finished checking secrets
2023-03-29 20:40:40,015 buildarr:1 buildarr.cli.run [INFO] Saving updated secrets file to &#39;/config/secrets.json&#39;
2023-03-29 20:40:40,017 buildarr:1 buildarr.cli.run [INFO] Finished saving updated secrets file
2023-03-29 20:40:40,017 buildarr:1 buildarr.cli.run [INFO] Updating configuration on remote instances
2023-03-29 20:40:40,017 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Getting remote configuration
2023-03-29 20:40:40,599 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Finished getting remote configuration
2023-03-29 20:40:40,662 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Updating remote configuration
2023-03-29 20:40:41,129 buildarr:1 buildarr.config.base [INFO] &lt;sonarr&gt; (default) sonarr.settings.general.host.instance_name: &#39;Sonarr&#39; -&gt; &#39;Sonarr (Buildarr Example)&#39;
2023-03-29 20:40:41,204 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Remote configuration successfully updated
2023-03-29 20:40:41,204 buildarr:1 buildarr.cli.run [INFO] &lt;sonarr&gt; (default) Finished updating remote configuration
2023-03-29 20:40:41,205 buildarr:1 buildarr.cli.run [INFO] Finished updating configuration on remote instances
2023-03-29 20:40:41,205 buildarr:1 buildarr.cli.daemon [INFO] Finished applying initial configuration
2023-03-29 20:40:41,205 buildarr:1 buildarr.cli.daemon [INFO] Scheduling update jobs
2023-03-29 20:40:41,206 buildarr:1 buildarr.cli.daemon [INFO] Finished scheduling update jobs
2023-03-29 20:40:41,206 buildarr:1 buildarr.cli.daemon [INFO] The next run will be at 2023-03-30 03:00
2023-03-29 20:40:41,206 buildarr:1 buildarr.cli.daemon [INFO] Setting up config file monitoring
2023-03-29 20:40:41,216 buildarr:1 buildarr.cli.daemon [INFO] Finished setting up config file monitoring
2023-03-29 20:40:41,216 buildarr:1 buildarr.cli.daemon [INFO] Setting up signal handlers
2023-03-29 20:40:41,216 buildarr:1 buildarr.cli.daemon [INFO] Finished setting up signal handlers
2023-03-29 20:40:41,216 buildarr:1 buildarr.cli.daemon [INFO] Buildarr ready.
</code></pre></div>
<p>Buildarr daemon supports the following signal types:</p>
<ul>
<li><code>SIGTERM</code>/<code>SIGINT</code> - Gracefully shutdown the Buildarr daemon.</li>
<li><code>SIGHUP</code> - Reload the Buildarr configuration file and perform an update run
  (the same action taken as when the <code>watch_config</code> option is enabled and Buildarr detects configuration changes).
  Not supported on Windows.</li>
</ul>
<h2 id="testing-configuration">Testing configuration<a class="headerlink" href="#testing-configuration" title="Permanent link">#</a></h2>
<p><em>New in version 0.4.0.</em></p>
<p>This is a mode for testing whether or not a configuration file is syntactically correct, can be loaded, and contains valid instance-to-instance link references and TRaSH-Guides metadata IDs.</p>
<p>This mode is intended for the user to test that a configuration will be loaded properly by Buildarr, before attempting to connect with any remote instances.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>buildarr<span class="w"> </span>test-config<span class="w"> </span><span class="o">[</span>/path/to/config.yml<span class="o">]</span>
</code></pre></div>
<p>If a configuration file is valid, the output from Buildarr will be similar to the following:</p>
<div class="highlight"><pre><span></span><code>$ buildarr test-config /config/buildarr.yml
2023-03-19 10:59:27,819 buildarr:1 buildarr.main [INFO] Buildarr version 0.4.0 (log level: INFO)
2023-03-19 10:59:27,820 buildarr:1 buildarr.main [INFO] Plugins loaded: sonarr (0.4.0)
2023-03-19 10:59:27,820 buildarr:1 buildarr.main [INFO] Testing configuration file: /config/buildarr.yml
2023-03-19 10:59:27,947 buildarr:1 buildarr.main [INFO] Loading configuration: PASSED
2023-03-19 10:59:27,947 buildarr:1 buildarr.main [INFO] Loading plugin managers: PASSED
2023-03-19 10:59:27,971 buildarr:1 buildarr.main [INFO] Loading instance configurations: PASSED
2023-03-19 10:59:27,971 buildarr:1 buildarr.main [INFO] Checking configured plugins: PASSED
2023-03-19 10:59:27,971 buildarr:1 buildarr.main [INFO] Resolving instance dependencies: PASSED
2023-03-19 10:59:31,634 buildarr:1 buildarr.main [INFO] Fetching TRaSH-Guides metadata: PASSED
2023-03-19 10:59:31,708 buildarr:1 buildarr.main [INFO] Rendering TRaSH-Guides metadata: PASSED
2023-03-19 10:59:32,053 buildarr:1 buildarr.main [INFO] Configuration test successful.
</code></pre></div>
<p>Since Buildarr does not connect to any remote instances in this mode, even if a configuration file passes the tests performed by <code>buildarr test-config</code>, it will not necessarily successfully communicate with them.</p>
<p>To test the configuration against live remote instances, without modifying them, you can use <code>buildarr run --dry-run</code> as documented in <a href="#dry-runs">Dry runs</a>.</p>
<h2 id="generating-a-docker-compose-file">Generating a Docker Compose file<a class="headerlink" href="#generating-a-docker-compose-file" title="Permanent link">#</a></h2>
<p><em>New in version 0.4.0.</em></p>
<p>This is an ad-hoc command that can be used to automatically generate a Docker Compose file from a given Buildarr configuration file.</p>
<p>The generated Docker Compose file is guaranteed to have:</p>
<ul>
<li>Image tags matching the instance versions defined in the Buildarr configuration file</li>
<li>Restart policy set on all services</li>
<li>Any required volumes created</li>
<li>Service dependencies added based on instance-to-instance links present in the Buildarr configuration</li>
<li>Buildarr itself added as a service in daemon mode, to deploy instance configurations and keep them up to date</li>
</ul>
<p>The resulting file will be relatively basic and might require some additional changes to suit your environment, but it should provide a good starting point for setting up automatic deployment and configuration of your *Arr stack.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are a few additional limitations on the instance configurations, on top of Buildarr's regular constraints:</p>
<ul>
<li>Instance hostnames must not be set to IP addresses.</li>
<li>All instances must have unique hostnames, unless the <code>--ignore-hostnames</code> option is set.</li>
</ul>
</div>
<p>Given the following example Buildarr configuration file, located at <code>/opt/buildarr/buildarr.yml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nn">---</span>
<span class="nt">sonarr</span><span class="p">:</span>
<span class="w">  </span><span class="nt">instances</span><span class="p">:</span>
<span class="w">    </span><span class="nt">sonarr-hd</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">sonarr-4k</span><span class="p">:</span>
<span class="w">      </span><span class="nt">settings</span><span class="p">:</span>
<span class="w">        </span><span class="nt">media_management</span><span class="p">:</span>
<span class="w">          </span><span class="nt">root_folders</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/tmp/videos</span>
<span class="w">        </span><span class="nt">profiles</span><span class="p">:</span>
<span class="w">          </span><span class="nt">language_profiles</span><span class="p">:</span>
<span class="w">            </span><span class="nt">definitions</span><span class="p">:</span>
<span class="w">              </span><span class="nt">English</span><span class="p">:</span>
<span class="w">                </span><span class="nt">languages</span><span class="p">:</span>
<span class="w">                  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;English&quot;</span>
<span class="w">        </span><span class="nt">import_lists</span><span class="p">:</span>
<span class="w">          </span><span class="nt">definitions</span><span class="p">:</span>
<span class="w">            </span><span class="s">&quot;Sonarr</span><span class="nv"> </span><span class="s">(HD)&quot;</span><span class="p p-Indicator">:</span>
<span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sonarr&quot;</span>
<span class="w">              </span><span class="nt">root_folder</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/tmp/videos&quot;</span>
<span class="w">              </span><span class="nt">quality_profile</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Any&quot;</span>
<span class="w">              </span><span class="nt">language_profile</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;English&quot;</span>
<span class="w">              </span><span class="nt">full_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://sonarr-hd:8989&quot;</span>
<span class="w">              </span><span class="nt">instance_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sonarr-hd&quot;</span>
</code></pre></div>
<p>We can use the following command to create a corresponding Docker Compose file.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>buildarr<span class="w"> </span>compose<span class="w"> </span>/opt/buildarr/buildarr.yml<span class="w"> </span>&gt;<span class="w"> </span>/opt/buildarr/docker-compose.yml
</code></pre></div>
<p>The resulting file located at <code>/opt/buildarr/docker-compose.yml</code> will look like this:</p>
<div class="highlight"><pre><span></span><code><span class="nn">---</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.7&#39;</span>
<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">sonarr_sonarr-hd</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lscr.io/linuxserver/sonarr:latest</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">sonarr_sonarr-hd</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/config</span>
<span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sonarr-hd</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span>
<span class="w">  </span><span class="nt">sonarr_sonarr-4k</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lscr.io/linuxserver/sonarr:latest</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">sonarr_sonarr-4k</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/config</span>
<span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sonarr-4k</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sonarr_sonarr-hd</span>
<span class="w">  </span><span class="nt">buildarr</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">callum027/buildarr:0.4.0</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daemon</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/config/buildarr.yml</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bind</span>
<span class="w">      </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/opt/buildarr</span>
<span class="w">      </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/config</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sonarr_sonarr-hd</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sonarr_sonarr-4k</span>
<span class="nt">volumes</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sonarr_sonarr-4k</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sonarr_sonarr-hd</span>
</code></pre></div>
<h2 id="plugin-specific-commands">Plugin-specific commands<a class="headerlink" href="#plugin-specific-commands" title="Permanent link">#</a></h2>
<p>Plugins can implement their own ad-hoc commands. These are mainly used for things such as dumping configuration from running instances.</p>
<p>For more information, refer to the user guide for the respective plugin.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
